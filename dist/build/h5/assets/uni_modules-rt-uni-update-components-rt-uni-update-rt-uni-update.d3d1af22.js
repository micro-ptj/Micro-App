import{_ as t,al as e,am as a,ac as s,o as n,c as o,w as c,i as l,a as d,b as i,m as r,q as u,x as p,H as f,an as _,ag as h,ao as m,z as b}from"./index.c7325688.js";var g=t({data:()=>({percent:0,updateBtn:!0,cancleBtn:!1,data:{describe:"1. 修复已知问题<br>2. 优化用户体验",edition_url:"https://mp-281e3ee8-3380-4740-9b6e-11eac5254879.cdn.bspapp.com/cloudstorage/cd703d88-ece5-4823-b922-dfe8b6c7b48c.apk",edition_force:1,package_type:0}}),onHide(){this.data.edition_force=0,e({delta:1})},onLoad({obj:t}){this.data=JSON.parse(t),0==this.data.edition_force&&(this.cancleBtn=!0)},onBackPress(){if(1==this.data.edition_force)return!0},methods:{cancel(){e({delta:1})},confirm(){0==this.data.package_type?this.data.edition_url.includes(".apk")?(this.updateBtn=!1,this.cancleBtn=!1,this.download()):(this.data.edition_force=0,plus.runtime.openURL(this.data.edition_url),e({delta:1})):(this.updateBtn=!1,this.cancleBtn=!1,this.download())},download(){let t=this.data.package_type,n=this;a({url:this.data.edition_url,success:a=>{200===a.statusCode&&(plus.runtime.install(a.tempFilePath,{force:!0},(function(){1==t&&plus.runtime.restart()}),(function(t){n.data.edition_force=0,s({title:t.message,icon:"none",duration:2500}),setTimeout((()=>{e()}),2e3)})),0==t&&(this.data.edition_force=0,e()))}}).onProgressUpdate((t=>{this.percent=t.progress}))}}},[["render",function(t,e,a,s,g,k){const y=p,B=f,x=l,w=_,C=h,v=m,F=b;return n(),o(x,{class:"mask flex-center"},{default:c((()=>[d(x,{class:"content botton-radius"},{default:c((()=>[d(x,{class:"content-top"},{default:c((()=>[d(y,{class:"content-top-text"},{default:c((()=>[i("发现新版本")])),_:1}),d(B,{class:"content-top",style:{top:"0"},width:"100%",height:"100%",src:"/uni_modules/rt-uni-update/static/bg_top.png"})])),_:1}),d(x,{class:"content-header"}),d(x,{class:"content-body"},{default:c((()=>[d(x,{class:"title"},{default:c((()=>[d(y,null,{default:c((()=>[i("更新内容")])),_:1})])),_:1}),d(x,{class:"body"},{default:c((()=>[d(C,{class:"box-des-scroll","scroll-y":"true"},{default:c((()=>[d(w,{nodes:g.data.describe},null,8,["nodes"])])),_:1})])),_:1}),d(x,{class:"footer flex-center"},{default:c((()=>[g.updateBtn?r("",!0):(n(),o(x,{key:0,class:"progress-box flex-column"},{default:c((()=>[d(v,{class:"progress","border-radius":"35",percent:g.percent,activeColor:"#3DA7FF","show-info":"","stroke-width":"10"},null,8,["percent"]),d(x,null,{default:c((()=>[d(y,null,{default:c((()=>[i("正在下载，请稍后")])),_:1})])),_:1})])),_:1})),g.updateBtn?(n(),o(F,{key:1,class:"content-button",style:{border:"none",color:"#fff"},plain:"",onClick:k.confirm},{default:c((()=>[i("立即升级")])),_:1},8,["onClick"])):r("",!0)])),_:1})])),_:1}),g.cancleBtn?(n(),o(B,{key:0,class:"close-img",src:"/uni_modules/rt-uni-update/static/app_update_close.png",onClick:u(k.cancel,["stop"])},null,8,["onClick"])):r("",!0)])),_:1})])),_:1})}],["__scopeId","data-v-0a3dc936"]]);export{g as default};
