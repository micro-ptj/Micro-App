import{_ as a,Z as e,a0 as o,f as s,a1 as l,j as t,k as r,o as u,c as n,w as d,a as p,b as c,N as m,i,d as f,r as h,D as v,J as g,Q as _,y,L as w,e as b,a2 as V,n as k}from"./index.d4fd57a9.js";import{_ as j,a as C,b as T}from"./u-form.d85f7ae7.js";import{_ as x}from"./u-button.68d3804d.js";var A=a({data:()=>({avatar:"https://cdn.uviewui.com/uview/common/logo.png"}),created(){e("uAvatarCropper",(a=>{this.avatar=a,o({url:s.base_url+"/common/upload",filePath:a,name:"file",complete:a=>{l({key:"avatar",data:JSON.parse(a.data).fileName,success:function(){console.log("success")}})}})}))},methods:{chooseAvatar(){this.$u.route({url:"/uni_modules/vk-uview-ui/components/u-avatar-cropper/u-avatar-cropper",params:{destWidth:300,rectWidth:200,fileType:"jpg"}})}}},[["render",function(a,e,o,s,l,f){const h=m,v=i,g=t(r("u-button"),x);return u(),n(v,{class:"wrap"},{default:d((()=>[p(v,{class:"u-avatar-wrap"},{default:d((()=>[p(h,{class:"u-avatar-demo",src:l.avatar,mode:"aspectFill"},null,8,["src"])])),_:1}),p(g,{onClick:f.chooseAvatar},{default:d((()=>[c("选择头像")])),_:1},8,["onClick"])])),_:1})}],["__scopeId","data-v-e47787e8"]]);var N=a(f({__name:"register",setup(a){const e=h({phone:"",password:"",avatar:"",code:""}),o=v("获取验证码"),l=()=>{null!=e.phone&&b({url:s.base_url+"/app/code",method:"GET",data:{phone:e.phone,type:"login"},header:{"Content-Type":"application/json"},success:a=>{200===a.data.code?(console.log("获取成功"),o.value="重新获取"):console.log(a.data.msg)}})},n=()=>{null==e.phone||e.password.length<=5?console.log("请输入正确的用户名与密码"):(V({key:"avatar",success:function(a){e.avatar=a.data}}),console.log(e),b({url:s.base_url+"/app/register",method:"POST",data:{phone:e.phone,avatar:e.avatar,password:e.password,code:e.code},header:{"Content-Type":"application/json"},success:a=>{200===a.data.code?setTimeout((()=>{k({url:"/pages/login/login"})}),1e3):console.log(a.data.msg)}}))};return(a,s)=>{const m=i,f=t(r("u-input"),j),h=t(r("u-form-item"),C),v=t(r("u-button"),x),b=t(r("u-form"),T);return u(),g(w,null,[p(m,{class:"login-title"},{default:d((()=>[c("基于区块链的拍卖平台")])),_:1}),p(_(A)),p(b,{model:e,ref:"uForm",style:{margin:"10rpx"}},{default:d((()=>[p(h,null,{default:d((()=>[p(f,{modelValue:e.phone,"onUpdate:modelValue":s[0]||(s[0]=a=>e.phone=a),type:"number",placeholder:"请输入电话号码"},null,8,["modelValue"])])),_:1}),p(h,null,{default:d((()=>[p(f,{type:"password",modelValue:e.password,"onUpdate:modelValue":s[1]||(s[1]=a=>e.password=a),placeholder:"请输入密码"},null,8,["modelValue"])])),_:1}),p(h,null,{default:d((()=>[p(f,{modelValue:e.code,"onUpdate:modelValue":s[2]||(s[2]=a=>e.code=a),type:"number",placeholder:"请输入验证码",maxlength:"4",class:"form-input"},null,8,["modelValue"]),p(v,{slot:"right",type:"success",size:"mini",onClick:l},{default:d((()=>[c(y(o.value),1)])),_:1})])),_:1})])),_:1},8,["model"]),p(v,{type:"primary",onClick:n,style:{margin:"10rpx"}},{default:d((()=>[c("注册")])),_:1})],64)}}}),[["__scopeId","data-v-f7af86a6"]]);export{N as default};
